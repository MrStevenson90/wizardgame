/* css/responsive.css - Enhanced Mobile and Tablet Support */

/* ===== BASE RESPONSIVE BREAKPOINTS ===== */
/* Small mobile devices */
@media (max-width: 480px) {
    body {
        font-size: 14px;
    }
    
    #ui {
        font-size: 12px;
        top: 10px;
        left: 10px;
        right: 10px;
    }
    
    #ui div {
        padding: 6px 10px;
        margin-bottom: 6px;
        font-size: 12px;
    }
    
    #spellCount {
        font-size: 14px !important;
        padding: 12px 15px !important;
        min-width: 160px !important;
    }
    
    #instructions {
        font-size: 12px !important;
        max-width: 250px !important;
        line-height: 1.2 !important;
    }
    
    /* Popups for small screens */
    .popup {
        width: 95% !important;
        padding: 18px !important;
        font-size: 14px !important;
        margin: 10px !important;
        max-height: 85vh !important;
    }
    
    .popup h2 {
        font-size: 18px !important;
        margin-bottom: 12px !important;
    }
    
    .popup p {
        font-size: 13px !important;
        margin-bottom: 12px !important;
    }
    
    .popup button {
        font-size: 14px !important;
        padding: 10px 18px !important;
        margin: 6px !important;
    }
    
    /* Drawing challenge adjustments */
    #drawing-challenge-container {
        width: 200px !important;
        height: 200px !important;
        margin: 15px auto !important;
    }
    
    #cageUnlockCanvas {
        width: 200px !important;
        height: 200px !important;
    }
    
    /* Help content for small screens */
    .help-content {
        padding: 20px !important;
        margin: 15px !important;
        max-height: 80vh !important;
        overflow-y: auto !important;
    }
    
    .help-content h3 {
        font-size: 18px !important;
    }
    
    .help-content h4 {
        font-size: 14px !important;
    }
    
    .help-content li {
        font-size: 12px !important;
        margin: 6px 0 !important;
        padding: 6px 10px !important;
    }
    
    /* Battle UI for small screens */
    .battle-counter {
        top: 70px !important;
        left: 5px !important;
        right: 5px !important;
        font-size: 13px !important;
        padding: 10px 12px !important;
    }
    
    #battleAccuracyIndicator {
        bottom: 180px !important;
        font-size: 14px !important;
        padding: 8px 15px !important;
        min-width: 160px !important;
    }
    
    #realTimeAccuracy {
        bottom: 200px !important;
        font-size: 14px !important;
        padding: 8px 15px !important;
    }
    
    /* Accuracy feedback */
    .accuracy-feedback {
        top: 12% !important;
        right: 5px !important;
        left: 5px !important;
        font-size: 14px !important;
        padding: 10px !important;
    }
    
    .proximity-warning {
        top: 18% !important;
        font-size: 14px !important;
        padding: 15px 20px !important;
        max-width: 280px !important;
    }
    
    .success-effect {
        top: 30% !important;
        font-size: 18px !important;
        padding: 15px 20px !important;
        max-width: 260px !important;
    }
}

/* ===== MEDIUM MOBILE DEVICES (481px - 767px) ===== */
@media (min-width: 481px) and (max-width: 767px) {
    body {
        font-size: 15px;
    }
    
    #ui {
        font-size: 14px;
        top: 12px;
        left: 12px;
    }
    
    #ui div {
        padding: 8px 12px;
        margin-bottom: 8px;
        font-size: 14px;
    }
    
    #spellCount {
        font-size: 16px !important;
        padding: 15px 18px !important;
        min-width: 180px !important;
    }
    
    #instructions {
        font-size: 14px !important;
        max-width: 300px !important;
        line-height: 1.3 !important;
    }
    
    /* Popups for medium mobile */
    .popup {
        width: 90% !important;
        padding: 22px !important;
        font-size: 15px !important;
        max-width: 450px !important;
    }
    
    .popup h2 {
        font-size: 22px !important;
        margin-bottom: 15px !important;
    }
    
    .popup p {
        font-size: 15px !important;
        margin-bottom: 15px !important;
    }
    
    .popup button {
        font-size: 16px !important;
        padding: 12px 22px !important;
        margin: 8px !important;
    }
    
    /* Drawing challenge */
    #drawing-challenge-container {
        width: 240px !important;
        height: 240px !important;
    }
    
    #cageUnlockCanvas {
        width: 240px !important;
        height: 240px !important;
    }
    
    /* Battle UI for medium mobile */
    .battle-counter {
        top: 80px !important;
        left: 8px !important;
        right: 8px !important;
        font-size: 15px !important;
        padding: 12px 16px !important;
    }
    
    #battleAccuracyIndicator {
        bottom: 190px !important;
        font-size: 16px !important;
        padding: 10px 18px !important;
        min-width: 180px !important;
    }
    
    #realTimeAccuracy {
        bottom: 210px !important;
        font-size: 16px !important;
        padding: 10px 18px !important;
    }
}

/* ===== TABLETS (768px - 1024px) ===== */
@media (min-width: 768px) and (max-width: 1024px) {
    body {
        font-size: 16px;
    }
    
    #ui {
        font-size: 16px;
        top: 15px;
        left: 15px;
    }
    
    #ui div {
        padding: 10px 15px;
        margin-bottom: 10px;
        font-size: 16px;
    }
    
    #spellCount {
        font-size: 18px !important;
        padding: 18px 22px !important;
        min-width: 220px !important;
    }
    
    #instructions {
        font-size: 16px !important;
        max-width: 400px !important;
        line-height: 1.4 !important;
    }
    
    /* Popups for tablets */
    .popup {
        width: 70% !important;
        padding: 30px !important;
        font-size: 17px !important;
        max-width: 600px !important;
    }
    
    .popup h2 {
        font-size: 26px !important;
        margin-bottom: 18px !important;
    }
    
    .popup p {
        font-size: 17px !important;
        margin-bottom: 18px !important;
    }
    
    .popup button {
        font-size: 18px !important;
        padding: 15px 28px !important;
        margin: 10px !important;
    }
    
    /* Drawing challenge for tablets */
    #drawing-challenge-container {
        width: 280px !important;
        height: 280px !important;
    }
    
    #cageUnlockCanvas {
        width: 280px !important;
        height: 280px !important;
    }
    
    /* Help content for tablets */
    .help-content {
        padding: 35px !important;
        max-width: 650px !important;
    }
    
    .help-content h3 {
        font-size: 26px !important;
    }
    
    .help-content h4 {
        font-size: 18px !important;
    }
    
    .help-content li {
        font-size: 15px !important;
        margin: 8px 0 !important;
        padding: 8px 12px !important;
    }
    
    /* Battle UI for tablets */
    .battle-counter {
        top: 120px !important;
        left: 15px !important;
        right: 15px !important;
        font-size: 17px !important;
        padding: 18px 22px !important;
        max-width: 350px !important;
    }
    
    #battleAccuracyIndicator {
        bottom: 220px !important;
        font-size: 18px !important;
        padding: 15px 22px !important;
        min-width: 220px !important;
    }
    
    #realTimeAccuracy {
        bottom: 240px !important;
        font-size: 18px !important;
        padding: 15px 22px !important;
    }
    
    /* Accuracy feedback for tablets */
    .accuracy-feedback {
        top: 15% !important;
        right: 25px !important;
        font-size: 16px !important;
        padding: 15px !important;
    }
    
    .proximity-warning {
        top: 20% !important;
        font-size: 18px !important;
        padding: 20px 28px !important;
        max-width: 400px !important;
    }
    
    .success-effect {
        top: 35% !important;
        font-size: 22px !important;
        padding: 25px 32px !important;
        max-width: 350px !important;
    }
}

/* ===== LANDSCAPE ORIENTATION ADJUSTMENTS ===== */
@media (orientation: landscape) {
    /* General landscape adjustments */
    .popup {
        max-height: 85vh !important;
        overflow-y: auto !important;
    }
    
    .help-overlay .help-content {
        max-height: 80vh !important;
        overflow-y: auto !important;
    }
}

/* ===== LANDSCAPE MOBILE SPECIFIC ===== */
@media (orientation: landscape) and (max-height: 500px) {
    #ui {
        top: 10px !important;
        left: 200px !important; /* Clear joystick area */
        font-size: 12px !important;
    }
    
    #ui div {
        padding: 5px 8px !important;
        margin-bottom: 5px !important;
    }
    
    #spellCount {
        font-size: 14px !important;
        padding: 8px 12px !important;
        min-width: 140px !important;
    }
    
    #instructions {
        font-size: 12px !important;
        max-width: 250px !important;
        line-height: 1.2 !important;
    }
    
    .battle-counter {
        top: 10px !important;
        left: 200px !important; /* Clear joystick area */
        right: 10px !important;
        font-size: 12px !important;
        padding: 8px 12px !important;
    }
    
    #battleAccuracyIndicator {
        bottom: 120px !important;
        font-size: 14px !important;
        padding: 8px 15px !important;
    }
    
    #realTimeAccuracy {
        bottom: 140px !important;
        font-size: 14px !important;
        padding: 8px 15px !important;
    }
    
    .help-button {
        top: 10px !important;
        right: 70px !important; /* Next to fullscreen button */
        width: 30px !important;
        height: 30px !important;
        font-size: 14px !important;
    }
    
    .popup {
        width: 85% !important;
        max-width: 500px !important;
        padding: 20px !important;
        font-size: 14px !important;
    }
    
    .popup h2 {
        font-size: 18px !important;
        margin-bottom: 12px !important;
    }
    
    .popup button {
        font-size: 14px !important;
        padding: 8px 16px !important;
    }
    
    #drawing-challenge-container {
        width: 200px !important;
        height: 200px !important;
    }
    
    #cageUnlockCanvas {
        width: 200px !important;
        height: 200px !important;
    }
}

/* ===== VERY SMALL SCREENS (320px and below) ===== */
@media (max-width: 320px) {
    #ui {
        font-size: 11px;
        top: 8px;
        left: 8px;
        right: 8px;
    }
    
    #ui div {
        padding: 4px 8px;
        margin-bottom: 4px;
        font-size: 11px;
    }
    
    #spellCount {
        font-size: 12px !important;
        padding: 8px 10px !important;
        min-width: 140px !important;
    }
    
    #instructions {
        font-size: 11px !important;
        max-width: 200px !important;
        line-height: 1.1 !important;
    }
    
    .popup {
        width: 98% !important;
        padding: 15px !important;
        font-size: 12px !important;
        margin: 5px !important;
    }
    
    .popup h2 {
        font-size: 16px !important;
        margin-bottom: 10px !important;
    }
    
    .popup p {
        font-size: 12px !important;
        margin-bottom: 10px !important;
    }
    
    .popup button {
        font-size: 12px !important;
        padding: 8px 15px !important;
        margin: 4px !important;
    }
    
    #drawing-challenge-container {
        width: 180px !important;
        height: 180px !important;
    }
    
    #cageUnlockCanvas {
        width: 180px !important;
        height: 180px !important;
    }
    
    .battle-counter {
        font-size: 11px !important;
        padding: 8px 10px !important;
    }
    
    #battleAccuracyIndicator {
        font-size: 12px !important;
        padding: 6px 12px !important;
        min-width: 140px !important;
    }
}

/* ===== HIGH DPI DISPLAYS ===== */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    /* Sharper borders and shadows for high DPI */
    .popup {
        border-width: 1px !important;
        box-shadow: 0 0 25px rgba(255, 215, 0, 0.4) !important;
    }
    
    #ui div {
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
    }
    
    .battle-counter {
        border-width: 2px !important;
    }
    
    #battleAccuracyIndicator {
        border-width: 2px !important;
    }
}

/* ===== ACCESSIBILITY IMPROVEMENTS ===== */
/* Larger touch targets */
@media (max-width: 1024px) {
    button,
    .popup button,
    .help-button,
    #fullscreen-btn {
        min-height: 44px !important;
        min-width: 44px !important;
    }
    
    .popup button {
        margin: 8px !important;
    }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    .loading-spinner {
        animation: none !important;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .popup {
        border-width: 3px !important;
        background: rgba(0, 0, 0, 0.95) !important;
    }
    
    #ui div {
        border: 2px solid rgba(255, 255, 255, 0.5) !important;
        background: rgba(0, 0, 0, 0.8) !important;
    }
    
    .battle-counter {
        border-width: 4px !important;
        background: rgba(0, 0, 0, 0.95) !important;
    }
    
    button {
        border: 2px solid #ffd700 !important;
    }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */
/* Disable expensive effects on mobile */
@media (max-width: 768px) {
    .popup {
        backdrop-filter: blur(5px) !important; /* Reduced blur */
    }
    
    #ui div {
        backdrop-filter: blur(3px) !important; /* Reduced blur */
    }
    
    .battle-counter {
        backdrop-filter: blur(5px) !important; /* Reduced blur */
    }
    
    #battleAccuracyIndicator {
        backdrop-filter: blur(5px) !important; /* Reduced blur */
    }
}

/* ===== FULLSCREEN ADJUSTMENTS ===== */
/* Fullscreen mode optimizations */
@media (display-mode: fullscreen) {
    body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }
    
    #ui {
        top: calc(10px + env(safe-area-inset-top));
        left: calc(10px + env(safe-area-inset-left));
    }
    
    #fullscreen-btn {
        top: calc(20px + env(safe-area-inset-top));
        right: calc(20px + env(safe-area-inset-right));
    }
    
    .help-button {
        top: calc(75px + env(safe-area-inset-top));
        right: calc(20px + env(safe-area-inset-right));
    }
}